{% extends "base.html" %}

{% block title %}Share Post{% endblock %}

{% block content %}
{% if current_user.is_authenticated %}

    <h2>Compartilhar post</h2>
    <img src = "{{ url_for('static', filename = 'profile_pics/' + (current_user.profile_pic or 'default.png')) }}"
         class="author-pic" width="50" height="50">
    <form action="{{ action_url }}" method="POST">
        {{ form.hidden_tag() }}
        {{ form.body.label }}
        {{ form.body(rows=3, class_="form-control") }}
        {{ form.submit(class_="btn btn-primary mt-2") }}
    </form>

    <hr>

    {% if is_shared %}
        <div class="shared-info">
            <img src="{{ url_for('static', filename='profile_pics/' + (post.author.profile_pic or 'default.png')) }}" width="40" height="40" class="me-2">
            <p><strong>{{ post.author.username }}</strong> compartilhou</p>
            <p class="text-muted">{{ post.date.astimezone().strftime("%d/%m/%Y %H:%M") }}</p>
            {% if post.body %}
                <p>{{ post.body }}</p>
            {% endif %}
        </div>
    {% else %}
        <div class="original-post border p-2">
            <div class="d-flex align-items-center mb-2">
                <img src="{{ url_for('static', filename='profile_pics/' + (post.author.profile_pic or 'default.png')) }}" width="40" height="40" class="me-2">
                <div>
                    <p class="mb-0"><strong>{{ post.author.username }}</strong></p>
                    <small class="text-muted">{{ post.date.astimezone().strftime("%d/%m/%Y %H:%M") }}</small>
                </div>
            </div>

            <h4>{{ post.title }}</h4>
            <p>{{ post.body }}</p>

            {% if post.post_pic %}
                <img src="{{ url_for('static', filename='post_pics/' ~ post.post_pic) }}" class="img-fluid">
            {% endif %}
        </div>
    {% endif %}

{% endif %}
{% endblock %}